<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.1.0/css/responsive.bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.2.7/css/select.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.16/sl-1.2.5/datatables.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.2.7/css/select.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.5.2/css/buttons.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/4.3.0/dropzone.css" />

    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/select/1.2.7/js/dataTables.select.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/responsive/2.1.0/js/dataTables.responsive.min.js"></script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/responsive/2.1.0/js/responsive.bootstrap.min.js"></script>
    <script type="text/javascript" language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/4.3.0/dropzone.js"></script>
<style>
    .row {
        margin-right:0px !important;
    
    }
    .modal {
            display:    none;
            position:   fixed;
            z-index:    1000;
            top:        0;
            left:       0;
            height:     100%;
            width:      100%;
            background: rgba( 255, 255, 255, .8 ) 
                        url('http://i.stack.imgur.com/FhHRx.gif') 
                        50% 50% 
                        no-repeat;
        }

        /* When the body has the loading class, we turn
           the scrollbar off with overflow:hidden */
        body.loading .modal {
            overflow: hidden;   
        }

        /* Anytime the body has the loading class, our
           modal element will be visible */
        body.loading .modal {
            display: block;
        }
    
</style>
</head>
<body>
    
    <form class="text-center border border-light p-5" action="#!">

            <div class="col-md-3">
                <input type="text" id="txtAccountcode" class="form-control mb-4" placeholder="Name">
            </div>
            <div class="col-md-3">
                <button class="btn btn-info btn-block" id="inserAccountCode">Save</button>
            </div>
        
       

    </form>
    <br />
    <br />
    <br />
    <div class="row">
        <div class="col-md-6">
            <table id="tblGeneralCode" class="table table-striped table-bordered nowrap" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th>General Code</th>


                    </tr>
                </thead>
            </table>


        </div>

    </div>
    <div class="modal"><!-- Place at bottom of page --></div>

    <script src="plugins/jQuery/jQuery-2.2.0.min.js"></script>
    <script src="plugins/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $body = $("body");

            $(document).on({
                ajaxStart: function () { $body.addClass("loading"); },
                ajaxStop: function () { $body.removeClass("loading"); }
            });

            getGeneralCode();
            $('#inserAccountCode').on('click', function (evt) {
                evt.preventDefault();
                var ajax_data = {
                    AccountCode: $('#txtAccountcode').val()

                };
                var _self = this;
                $.ajax({
                    url: "api/AccountCode/InsertGeneralCode/",
                    data: ajax_data,
                    type: 'POST',
                    dataType: 'json',
                    data: ajax_data,
                    success: function (data) {
                        getGeneralCode();
                    },
                    error: function (request) {

                    }
                });
            });
            
        });
        function getGeneralCode() {
    
            $.ajax({
                url: "api/AccountCode/GetGeneralCode",
                type: 'GET',
                dataType: 'json',

                success: function (data) {
                    console.log(data);
                    //tblRawData
                    if ($.fn.dataTable.isDataTable('#tblGeneralCode')) {
                        audittabvar = $('#tblGeneralCode').DataTable().clear().destroy();
                    }
                    $('#tblGeneralCode').dataTable({
                        data: data,
                        "columns": [
                            { "data": "GENERALCODE" }
                            
                        ]
                    })
    
                },
                error: function (request) {
                    console.log('failure');
                    //notifyError('Saving User Detail failed!');

                }
            });


        }
    </script>
</body>
</html>
